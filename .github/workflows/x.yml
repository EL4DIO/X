name: Boost Activity and Earn Achievements

on:
  schedule:
    - cron: '*/10 * * * *'  # Runs every 30 minutes
  workflow_dispatch:  # Allows manual trigger for testing

jobs:
  activity_boost:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v3

      - name: Set up Git
        run: |
          git config user.name "github-actions"
          git config user.email "github-actions@users.noreply.github.com"

      # Create random branches and commit files to simulate activity
      - name: Create random branches and push files
        run: |
          # Generate timestamp for uniqueness
          TIMESTAMP=$(date +%Y-%m-%d_%H-%M-%S)
          BRANCH_NAME="feature/update-docs-$TIMESTAMP"
          mkdir -p "docs/updates/$TIMESTAMP"
          
          # Create and push files to simulate work
          echo "This is an update for $TIMESTAMP" > "docs/updates/$TIMESTAMP/README.md"
          echo "Documentation update at $TIMESTAMP" > "docs/updates/$TIMESTAMP/CHANGELOG.md"

          # Stage, commit, and push changes
          git add .
          git commit -m "Update docs at $TIMESTAMP"
          git push origin main

          # Create a new branch and push to it
          git checkout -b "$BRANCH_NAME"
          git add .
          git commit -m "Automated docs update on branch $BRANCH_NAME"
          git push --set-upstream origin "$BRANCH_NAME"

  
      # Trigger the First Issue achievement by creating an issue
      - name: Create an Issue
        run: |
          curl -u "github-actions:${{ secrets.GITHUB_TOKEN }}" \
          -X POST -H "Accept: application/vnd.github.v3+json" \
          -d '{"title":"Automated Issue","body":"This is an issue created by a GitHub action."}' \
          https://api.github.com/repos/${{ github.repository }}/issues

      # Trigger the First Commit achievement by making a new commit
      - name: Make a First Commit
        run: |
          TIMESTAMP=$(date +%Y-%m-%d_%H-%M-%S)
          echo "First commit example $TIMESTAMP" > "new_file_$TIMESTAMP.txt"
          git add "new_file_$TIMESTAMP.txt"
          git commit -m "First commit example $TIMESTAMP"
          git push origin main

      # Create multiple new files rapidly to earn the Quickdraw achievement
      - name: Push New Files for Quickdraw
        run: |
          for i in {1..5}; do
            TIMESTAMP=$(date +%Y-%m-%d_%H-%M-%S)
            echo "Quickdraw file created at $TIMESTAMP" > "quickdraw/quickdraw_$TIMESTAMP.txt"
            git add "quickdraw/quickdraw_$TIMESTAMP.txt"
            git commit -m "Quickdraw commit $TIMESTAMP"
            git push origin main
          done
